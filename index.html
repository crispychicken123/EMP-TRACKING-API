<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crispy Chicken - HR & Compliance System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --cc-red: #E4002B;
            --cc-black: #1a1a1a;
            --cc-white: #ffffff;
            --cc-gray: #f4f6f9;
            --cc-border: #e0e0e0;
            --cc-text-muted: #666;
            --cc-bg-modal: #ffffff;
            --cc-table-hover: rgba(0,0,0,0.02);
            --color-warning: #f59e0b;
            --color-danger: #dc3545;
            --color-success: #10b981;
            --color-info: #3b82f6;
        }

        [data-theme="dark"] {
            --cc-black: #f0f0f0;
            --cc-white: #1e1e1e;
            --cc-gray: #252526;
            --cc-border: #333;
            --cc-text-muted: #aaa;
            --cc-bg-modal: #2d2d2d;
            --cc-table-hover: rgba(255,255,255,0.05);
        }

        * { box-sizing: border-box; outline: none; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, 'Cairo', sans-serif;
            background-color: var(--cc-gray);
            margin: 0;
            padding: 0;
            color: var(--cc-black);
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
        }

        /* RTL Support */
        [dir="rtl"] body {
            font-family: 'Cairo', 'Segoe UI', sans-serif;
        }

        [dir="rtl"] .form-grid {
            direction: rtl;
        }

        [dir="rtl"] .modal-header,
        [dir="rtl"] .modal-footer {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .document-item {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .logo-area {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .controls {
            flex-direction: row-reverse;
        }

        [dir="rtl"] .header-actions {
            flex-direction: row-reverse;
        }

        /* --- HEADER --- */
        header {
            background-color: var(--cc-white); color: var(--cc-black);
            padding: 12px 24px; display: flex; align-items: center; justify-content: space-between;
            border-bottom: 4px solid var(--cc-red); position: sticky; top: 0; z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .logo-area { display: flex; align-items: center; gap: 12px; }
        .chef-icon { font-size: 28px; background: var(--cc-red); color: white; border-radius: 50%; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; }
        .app-title h1 { margin: 0; font-size: 18px; font-weight: 700; }
        .app-title span { font-size: 11px; opacity: 0.7; text-transform: uppercase; letter-spacing: 1px; }

        .header-actions { display: flex; gap: 15px; align-items: center; }
        .header-btn { background: none; border: none; font-size: 16px; cursor: pointer; color: var(--cc-text-muted); transition: color 0.2s; position: relative; padding: 8px; }
        .header-btn:hover { color: var(--cc-black); }
        
        /* New Reset Button Style */
        .btn-reset-system {
            color: var(--color-danger) !important;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .btn-reset-system:hover {
            background-color: rgba(220, 53, 69, 0.1);
            border-color: var(--color-danger);
        }

        .badge-notify { position: absolute; top: -5px; right: -5px; background: var(--color-danger); color: white; font-size: 10px; padding: 2px 5px; border-radius: 10px; display: none; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .lang-toggle { background: var(--cc-red); color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; }

        /* --- CONTROLS --- */
        .controls { padding: 15px 24px; background: var(--cc-white); display: flex; gap: 12px; align-items: center; border-bottom: 1px solid var(--cc-border); flex-wrap: wrap; }
        .search-wrapper { flex: 1; min-width: 200px; position: relative; }
        .search-wrapper input { width: 100%; padding: 10px 10px 10px 35px; border: 1px solid var(--cc-border); border-radius: 20px; font-size: 14px; background-color: var(--cc-gray); color: var(--cc-black); }
        [dir="rtl"] .search-wrapper input { padding: 10px 35px 10px 10px; }
        .search-wrapper input:focus { border-color: var(--cc-red); }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #888; }
        [dir="rtl"] .search-icon { left: auto; right: 12px; }

        button { padding: 9px 18px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; color: white; display: inline-flex; align-items: center; gap: 6px; transition: all 0.2s; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        button:active { transform: translateY(0); }
        .btn-add { background-color: var(--cc-red); }
        .btn-export { background-color: #28a745; }
        .btn-print { background-color: #6c757d; }

        /* --- DASHBOARD --- */
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; padding: 20px 24px 0 24px; }
        .stat-card { background: var(--cc-white); padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.03); border-top: 4px solid transparent; display: flex; flex-direction: column; align-items: center; }
        .stat-number { font-size: 28px; font-weight: 800; color: var(--cc-black); margin-bottom: 2px; }
        .stat-label { font-size: 11px; font-weight: 600; color: var(--cc-text-muted); text-transform: uppercase; }
        
        .stat-total { border-color: #666; } .stat-new { border-color: #3b82f6; } 
        .stat-active { border-color: #10b981; } .stat-alert { border-color: #f59e0b; }

        /* --- TABLE --- */
        .table-container { margin: 20px 24px 24px 24px; background: var(--cc-white); border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.03); border: 1px solid var(--cc-border); overflow: hidden; }
        .table-header { padding: 12px 20px; background: var(--cc-gray); border-bottom: 1px solid var(--cc-border); display: flex; justify-content: space-between; align-items: center; }
        .table-scroll { overflow-x: auto; max-height: calc(100vh - 260px); }
        table { width: 100%; border-collapse: collapse; min-width: 1800px; }
        
        th { background-color: var(--cc-gray); color: var(--cc-text-muted); font-weight: 700; font-size: 11px; text-transform: uppercase; padding: 12px 10px; text-align: left; border-bottom: 2px solid var(--cc-border); position: sticky; top: 0; z-index: 10; }
        [dir="rtl"] th { text-align: right; }
        td { padding: 10px; border-bottom: 1px solid var(--cc-border); font-size: 13px; color: var(--cc-black); vertical-align: middle; }
        [dir="rtl"] td { text-align: right; }
        tr:hover { background-color: var(--cc-table-hover); }
        
        tr.new-staff-row { background-color: rgba(59, 130, 246, 0.03); border-left: 3px solid #3b82f6; }
        [dir="rtl"] tr.new-staff-row { border-left: none; border-right: 3px solid #3b82f6; }
        tr.alert-row { background-color: rgba(245, 158, 11, 0.03); border-left: 3px solid #f59e0b; }
        [dir="rtl"] tr.alert-row { border-left: none; border-right: 3px solid #f59e0b; }

        /* Status & Badges */
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold; text-transform: uppercase; }
        .status-warning { background-color: #fef3c7; color: #92400e; border: 1px solid #f59e0b; }
        .status-expired { background-color: #fee2e2; color: #991b1b; border: 1px solid #dc3545; }
        .status-ok { background-color: #d1fae5; color: #065f46; }
        .status-process { background-color: #dbeafe; color: #1e40af; }

        .date-warning { color: #d97706; font-weight: bold; font-size: 11px; }
        .date-expired { color: #dc3545; font-weight: bold; font-size: 11px; }

        .next-step-badge { display: inline-block; font-size: 11px; color: #555; background: #eee; padding: 2px 6px; border-radius: 4px; border-left: 3px solid #666; max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        [dir="rtl"] .next-step-badge { border-left: none; border-right: 3px solid #666; }

        .action-btn { background: none; border: none; cursor: pointer; padding: 6px; font-size: 15px; border-radius: 4px; transition: all 0.2s; }
        .action-btn:hover { background-color: rgba(0,0,0,0.05); }
        .btn-edit { color: #007bff; } 
        .btn-del { color: #dc3545; } 
        .btn-print { color: #666; }

        /* --- MODAL --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(3px); justify-content: center; align-items: center; z-index: 1000; opacity: 0; transition: opacity 0.2s; }
        .modal-overlay.open { display: flex; opacity: 1; }
        .modal-content { background: var(--cc-bg-modal); padding: 0; border-radius: 12px; width: 95%; max-width: 1100px; max-height: 90vh; display: flex; flex-direction: column; box-shadow: 0 15px 50px rgba(0,0,0,0.3); border: 1px solid var(--cc-border); }
        .modal-header { padding: 15px 25px; border-bottom: 1px solid var(--cc-border); display: flex; justify-content: space-between; align-items: center; background: var(--cc-gray); border-radius: 12px 12px 0 0; }
        .modal-body { padding: 25px; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 15px 25px; border-top: 1px solid var(--cc-border); display: flex; justify-content: space-between; background: var(--cc-gray); border-radius: 0 0 12px 12px; }
        
        .form-section-title { grid-column: span 4; border-top: 2px solid var(--cc-border); margin-top: 15px; padding-top: 10px; color: var(--cc-red); font-weight: bold; font-size: 13px; text-transform: uppercase; }
        .form-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .form-group { margin-bottom: 5px; }
        .form-group label { display: block; margin-bottom: 4px; font-weight: 600; font-size: 11px; color: var(--cc-text-muted); }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid var(--cc-border); border-radius: 4px; font-size: 12px; background: var(--cc-white); color: var(--cc-black); }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: var(--cc-red); box-shadow: 0 0 0 2px rgba(228, 0, 43, 0.1); }
        .form-group input[type="date"] { min-height: 36px; }
        .form-group textarea { resize: vertical; min-height: 80px; }

        .required label::after { content: " *"; color: var(--color-danger); }

        /* --- DOCUMENT UPLOAD --- */
        .upload-area { border: 1px dashed var(--cc-border); border-radius: 4px; padding: 15px; text-align: center; margin-top: 10px; cursor: pointer; transition: all 0.2s; }
        .upload-area:hover { border-color: var(--cc-red); background-color: rgba(228, 0, 43, 0.05); }
        .document-list { margin-top: 10px; max-height: 200px; overflow-y: auto; }
        .document-item { display: flex; align-items: center; justify-content: space-between; padding: 8px; background: var(--cc-gray); border-radius: 4px; margin-bottom: 5px; }
        .document-name { font-size: 12px; display: flex; align-items: center; gap: 8px; flex: 1; }
        .document-date { font-size: 10px; color: var(--cc-text-muted); }
        .document-actions { display: flex; gap: 5px; }

        /* --- PROFESSIONAL REPORT STYLES (PDF/PRINT) --- */
        #printArea { display: none; }

        .report-header { text-align: center; border-bottom: 3px solid var(--cc-red); padding-bottom: 20px; margin-bottom: 30px; display: flex; align-items: center; justify-content: center; gap: 20px; }
        .report-logo { width: 80px; height: 80px; background: var(--cc-red); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; color: white; }
        .report-title h2 { margin: 0; color: #333; font-size: 24px; }
        .report-title p { margin: 5px 0 0; color: #666; font-size: 14px; }
        
        .report-section { margin-bottom: 25px; }
        .report-section h3 { font-size: 16px; color: var(--cc-red); border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-top: 0; margin-bottom: 10px; }
        .report-table { width: 100%; border-collapse: collapse; border: 1px solid #ddd; }
        .report-table th, .report-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 13px; }
        [dir="rtl"] .report-table th, [dir="rtl"] .report-table td { text-align: right; }
        .report-table th { background-color: #f9f9f9; color: #333; }
        
        .status-stamp { 
            width: 180px; height: 180px; border: 5px solid #28a745; color: #28a745; 
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            font-weight: 900; font-size: 24px; transform: rotate(-15deg); opacity: 0.2; margin-top: 20px;
        }
        .signature-area { margin-top: 80px; display: flex; justify-content: space-between; }
        .sign-box { width: 40%; border-top: 2px solid #000; padding-top: 10px; text-align: center; font-size: 14px; color: #333; font-weight: bold;}

        @media print {
            body { margin: 0; background: white; }
            header, .controls, .dashboard, .table-container, .modal-overlay, .toast { display: none !important; }
            #printArea {
                display: block !important;
                position: absolute;
                top: 0; left: 0; width: 100%;
                background: white; color: black; padding: 40px; z-index: 99999;
            }
            .no-print { display: none; }
            .status-stamp { opacity: 1; border-width: 5px; }
            .report-header, .report-section { page-break-inside: avoid; }
        }

        .toast { visibility: hidden; min-width: 280px; background-color: #333; color: #fff; text-align: center; border-radius: 8px; padding: 14px 24px; position: fixed; z-index: 2000; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(20px); box-shadow: 0 5px 20px rgba(0,0,0,0.3); font-size: 14px; opacity: 0; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .toast.show { visibility: visible; opacity: 1; transform: translateX(-50%) translateY(0); }
        .toast.success { background-color: #28a745; }
        .toast.error { background-color: #dc3545; }
        .toast.warning { background-color: #f59e0b; color: #000; }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--cc-text-muted);
        }
        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Loading */
        .loading { display: none; text-align: center; padding: 20px; }
        .spinner { border: 3px solid var(--cc-gray); border-top: 3px solid var(--cc-red); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Responsive */
        @media (max-width: 768px) {
            .form-grid { grid-template-columns: repeat(2, 1fr); }
            .form-section-title { grid-column: span 2; }
            .controls { flex-direction: column; align-items: stretch; }
            .search-wrapper, select { width: 100%; margin-bottom: 10px; }
            .dashboard { grid-template-columns: repeat(2, 1fr); }
            header, .controls, .dashboard, .table-container { padding: 15px; }
        }

        @media (max-width: 480px) {
            .form-grid { grid-template-columns: 1fr; }
            .form-section-title { grid-column: span 1; }
            .dashboard { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="logo-area">
            <div class="chef-icon">üë®‚Äçüç≥</div>
            <div class="app-title">
                <h1 data-i18n="appTitle">CRISPY CHICKEN HR</h1>
                <span data-i18n="appSubtitle">Compliance & Onboarding Tracker</span>
            </div>
        </div>
        <div class="header-actions">
            <!-- NEW: Reset System Button -->
            <button class="header-btn btn-reset-system" title="Delete All Data & Reset System" onclick="resetSystem()">
                <i class="fas fa-trash-alt"></i>
            </button>
            
            <button class="header-btn" title="Toggle Dark Mode" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
            <button class="header-btn" title="Daily Alerts & 15-Day Warning" onclick="showNotifications()">
                <i class="fas fa-bell"></i>
                <span id="notifCount" class="badge-notify">0</span>
            </button>
            <button class="lang-toggle" onclick="toggleLanguage()">
                <span id="langText">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
            </button>
        </div>
    </header>

    <!-- Controls -->
    <div class="controls">
        <div class="search-wrapper">
            <span class="search-icon">üîç</span>
            <input type="text" id="searchInput" placeholder="Search ID, Name..." data-i18n-placeholder="searchPlaceholder" onkeyup="filterData()">
        </div>
        <div style="flex:1"></div>
        <select id="typeFilter" onchange="filterData()" style="padding:8px; border-radius:4px; border:1px solid #ccc;">
            <option value="" data-i18n="allStaff">All Staff</option>
            <option value="new" data-i18n="newStaff">üîµ New Staff (Onboarding)</option>
            <option value="existing" data-i18n="existingStaff">üü¢ Existing Staff</option>
            <option value="alert" data-i18n="needsAttention">üü† Needs Attention</option>
        </select>
        <button class="btn-export" onclick="exportToCSV()"><i class="fas fa-download"></i> <span data-i18n="exportBtn">Excel</span></button>
        <button class="btn-add" onclick="openAddModal()"><i class="fas fa-plus"></i> <span data-i18n="addStaffBtn">New Staff</span></button>
    </div>

    <!-- Stats -->
    <div class="dashboard">
        <div class="stat-card stat-total">
            <div class="stat-number" id="totalCount">0</div>
            <div class="stat-label" data-i18n="totalStaff">Total Staff</div>
        </div>
        <div class="stat-card stat-new">
            <div class="stat-number" id="newCount" style="color: #3b82f6;">0</div>
            <div class="stat-label" data-i18n="onboarding">Onboarding</div>
        </div>
        <div class="stat-card stat-active">
            <div class="stat-number" id="activeCount" style="color: #10b981;">0</div>
            <div class="stat-label" data-i18n="activeHandedOver">Active / Handed Over</div>
        </div>
        <div class="stat-card stat-alert">
            <div class="stat-number" id="alertCount" style="color: #f59e0b;">0</div>
            <div class="stat-label" data-i18n="actionRequired">Action Required</div>
        </div>
    </div>

    <!-- Table -->
    <div class="table-container">
        <div class="table-header">
            <div style="font-weight:bold;" data-i18n="employeeDirectory">Employee Directory & Follow-ups</div>
            <div style="font-size:12px; color:var(--cc-text-muted);" id="tableCount">Showing 0 employees</div>
        </div>
        <div class="loading" id="tableLoading">
            <div class="spinner"></div>
            <p data-i18n="loading">Loading data...</p>
        </div>
        <div class="table-scroll">
            <table>
                <thead>
                    <tr>
                        <th style="width: 60px;" data-i18n="status">Sts</th>
                        <th style="width: 80px;" data-i18n="id">ID</th>
                        <th data-i18n="name">Name</th>
                        <th data-i18n="nextStep">Next Step / Follow Up</th>
                        <th data-i18n="branch">Branch</th>
                        <th style="width: 180px;" data-i18n="expiryAlerts">Expiry Alerts (Passport/Visa)</th>
                        <th data-i18n="status">Status</th>
                        <th style="width: 120px;" data-i18n="actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="employeeTableBody">
                    <!-- Data will be loaded here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- MAIN MODAL: ADD/EDIT -->
    <div id="staffModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle" style="margin:0;" data-i18n="staffDetails">Staff Details</h3>
                <button class="action-btn" onclick="closeModal('staffModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="staffForm">
                    <input type="hidden" id="editId">
                    
                    <div class="form-grid">
                        <!-- 1. BASIC INFO -->
                        <div class="form-section-title" style="border-top:none; margin-top:0; color:var(--cc-black);" data-i18n="basicInfo">1. Basic Information</div>
                        
                        <div class="form-group">
                            <label data-i18n="staffType">Staff Type</label>
                            <select id="inpStaffType" onchange="toggleFieldsByType()">
                                <option value="new" data-i18n="newStaffOption">New Staff (Onboarding)</option>
                                <option value="existing" data-i18n="existingStaffOption">Existing Staff</option>
                            </select>
                        </div>
                        
                        <div class="form-group required">
                            <label data-i18n="employeeId">Employee ID</label>
                            <input type="text" id="inpId" required>
                        </div>
                        
                        <div class="form-group required">
                            <label data-i18n="fullName">Full Name</label>
                            <input type="text" id="inpName" required>
                        </div>
                        
                        <div class="form-group">
                            <label data-i18n="nationality">Nationality</label>
                            <select id="inpNationality">
                                <option value="" data-i18n="selectNationality">Select...</option>
                                <option value="Egyptian">Egyptian</option>
                                <option value="Bangladeshi">Bangladeshi</option>
                                <option value="Ugandan">Ugandan</option>
                                <option value="Myanmar">Myanmar</option>
                                <option value="Indian">Indian</option>
                                <option value="Nepalese">Nepalese</option>
                                <option value="Filipino">Filipino</option>
                                <option value="Jordanian">Jordanian</option>
                                <option value="Syrian">Syrian</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label data-i18n="designation">Designation</label>
                            <input type="text" id="inpDesignation" placeholder="e.g., Restaurant Staff">
                        </div>
                        
                        <div class="form-group">
                            <label data-i18n="branch">Branch</label>
                            <select id="inpBranch">
                                <option value="" data-i18n="selectBranch">Select Branch</option>
                                <option value="CC Hamdan St">CC Hamdan St</option>
                                <option value="CC Khaldia">CC Khaldia</option>
                                <option value="CC Muroor">CC Muroor</option>
                                <option value="CC Shabiya 11">CC Shabiya 11</option>
                                <option value="CC Electria">CC Electria</option>
                                <option value="CC Al Barsha">CC Al Barsha</option>
                                <option value="CC Al Satwa">CC Al Satwa</option>
                                <option value="CC Al Rgga">CC Al Rgga</option>
                                <option value="CC Sharja">CC Sharja</option>
                                <option value="CC Head Office">CC Head Office</option>
                                <option value="CC Commissary">CC Commissary</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label data-i18n="hireApprovalDate">Hire Approval Date</label>
                            <input type="date" id="inpHireDate">
                        </div>
                        
                        <!-- New Staff Sections -->
                        <div id="newStaffSections">
                            <!-- 2. ENTRY & VISA -->
                            <div class="form-section-title" data-i18n="entryVisa">2. Entry & Pre-Joining (UAE)</div>
                            <div class="form-group"><label data-i18n="entryPermitIssued">Entry Permit Issued</label><input type="date" id="inpEntryIssued"></div>
                            <div class="form-group"><label data-i18n="entryPermitConfirmed">Entry Permit Confirmed</label><input type="date" id="inpEntryConfirmed"></div>
                            <div class="form-group"><label data-i18n="entryPermitExpiry">Entry Permit Expiry</label><input type="date" id="inpEntryExp"></div>
                            <div class="form-group"><label data-i18n="dateOfEntry">Date of Entry</label><input type="date" id="inpDateEntry"></div>
                            <div class="form-group"><label data-i18n="visitVisaExpiry">Visit Visa Expiry</label><input type="date" id="inpVisitVisaExp"></div>
                            <div class="form-group"><label data-i18n="responsible">Responsible</label>
                                <select id="inpEntryResponsible">
                                    <option value="" data-i18n="selectResponsible">Select...</option>
                                    <option value="HR">HR Department</option>
                                    <option value="PRO">Public Relations Officer</option>
                                    <option value="MR TAYSIR">MR TAYSIR</option>
                                </select>
                            </div>

                            <!-- 3. IMMIGRATION -->
                            <div class="form-section-title" data-i18n="immigrationLabour">3. Immigration & Labour</div>
                            <div class="form-group"><label data-i18n="mohreOfferIssued">MOHRE Offer Issued</label><input type="date" id="inpMohreOffer"></div>
                            <div class="form-group"><label data-i18n="offerSigned">Offer Signed</label><input type="date" id="inpOfferSigned"></div>
                            <div class="form-group"><label data-i18n="laborContractPrepared">Labor Contract Prepared</label><input type="date" id="inpLaborContract"></div>
                            <div class="form-group"><label data-i18n="laborContractSigned">Labor Contract Signed</label><input type="date" id="inpLaborSigned"></div>
                            <div class="form-group"><label data-i18n="statusAmdtSubmitted">Status Amdt Submitted</label><input type="date" id="inpStatusSub"></div>
                            <div class="form-group"><label data-i18n="statusAmdtApproved">Status Amdt Approved</label><input type="date" id="inpStatusApp"></div>
                            <div class="form-group"><label data-i18n="workPermitIssued">Work Permit Issued</label><input type="date" id="inpWorkPermit"></div>
                            <div class="form-group"><label data-i18n="cancellationExpiry">Cancellation Expiry</label><input type="date" id="inpCancelExp"></div>
                            <div class="form-group"><label data-i18n="responsible">Responsible</label>
                                <select id="inpImmigrationResponsible">
                                    <option value="" data-i18n="selectResponsible">Select...</option>
                                    <option value="HR">HR Department</option>
                                    <option value="PRO">Public Relations Officer</option>
                                    <option value="MR TAYSIR">MR TAYSIR</option>
                                </select>
                            </div>

                            <!-- 4. MEDICAL & EID -->
                            <div class="form-section-title" data-i18n="medicalEid">4. Medical & Emirates ID</div>
                            <div class="form-group"><label data-i18n="medicalScheduled">Medical Scheduled</label><input type="date" id="inpMedSch"></div>
                            <div class="form-group"><label data-i18n="medicalCompleted">Medical Completed</label><input type="date" id="inpMedComp"></div>
                            <div class="form-group"><label data-i18n="medicalResultIssued">Medical Result Issued</label><input type="date" id="inpMedResult"></div>
                            <div class="form-group"><label data-i18n="healthCardIssued">Health Card Issued</label><input type="date" id="inpHealthCard"></div>
                            <div class="form-group"><label data-i18n="medicalInsuranceRegistered">Medical Insurance Registered</label><input type="date" id="inpMedInsurance"></div>
                            <div class="form-group"><label data-i18n="eidBiometrics">EID Biometrics</label><input type="date" id="inpEidBio"></div>
                            <div class="form-group"><label data-i18n="eidCardPrinted">EID Card Printed</label><input type="date" id="inpEidCardPrinted"></div>
                            <div class="form-group"><label data-i18n="eidReceived">EID Received</label><input type="date" id="inpEidRec"></div>
                            <div class="form-group"><label data-i18n="responsible">Responsible</label>
                                <select id="inpMedicalResponsible">
                                    <option value="" data-i18n="selectResponsible">Select...</option>
                                    <option value="HR">HR Department</option>
                                    <option value="Admin">Admin Assistant</option>
                                    <option value="MR TAYSIR">MR TAYSIR</option>
                                </select>
                            </div>

                            <!-- 5. RESIDENCY VISA -->
                            <div class="form-section-title" data-i18n="residencyVisa">5. Residency Visa</div>
                            <div class="form-group"><label data-i18n="visaAppDate">Visa App Date</label><input type="date" id="inpVisaApp"></div>
                            <div class="form-group"><label data-i18n="visaIssuedDate">Visa Issued Date</label><input type="date" id="inpVisaIssued"></div>
                            <div class="form-group"><label data-i18n="visaStampedPassport">Visa Stamped in Passport</label><input type="date" id="inpVisaStamped"></div>
                            <div class="form-group"><label data-i18n="visaExpiry">Visa Expiry</label><input type="date" id="inpVisaExp"></div>
                            <div class="form-group"><label data-i18n="laborCardIssued">Labor Card Issued</label><input type="date" id="inpLaborCard"></div>
                            <div class="form-group"><label data-i18n="federalAuthorityRegistration">Federal Authority Registration</label><input type="date" id="inpFedAuthReg"></div>
                            <div class="form-group"><label data-i18n="responsible">Responsible</label>
                                <select id="inpVisaResponsible">
                                    <option value="" data-i18n="selectResponsible">Select...</option>
                                    <option value="HR">HR Department</option>
                                    <option value="PRO">Public Relations Officer</option>
                                    <option value="MR TAYSIR">MR TAYSIR</option>
                                </select>
                            </div>
                            
                            <!-- 6. ONBOARDING -->
                            <div class="form-section-title" data-i18n="companyOnboarding">6. Company On-Boarding</div>
                            <div class="form-group"><label data-i18n="bankAccountOpened">Bank Account Opened</label><input type="date" id="inpBankAccount"></div>
                            <div class="form-group"><label data-i18n="accommodationArranged">Accommodation Arranged</label><input type="date" id="inpAccommodation"></div>
                            <div class="form-group"><label data-i18n="uniformIssued">Uniform Issued</label><input type="date" id="inpUniform"></div>
                            <div class="form-group"><label data-i18n="equipmentHandover">Equipment Handover</label><input type="date" id="inpEquipment"></div>
                            <div class="form-group"><label data-i18n="itSetup">IT Setup</label>
                                <select id="inpItSetup"><option value="" data-i18n="pending">Pending</option><option value="Done" data-i18n="done">Done</option></select>
                            </div>
                            <div class="form-group"><label data-i18n="adminSetup">Admin Setup</label>
                                <select id="inpAdminSetup"><option value="" data-i18n="pending">Pending</option><option value="Done" data-i18n="done">Done</option></select>
                            </div>
                            <div class="form-group"><label data-i18n="orientation">Orientation</label>
                                <select id="inpOrientation"><option value="" data-i18n="pending">Pending</option><option value="Done" data-i18n="done">Done</option></select>
                            </div>
                            <div class="form-group"><label data-i18n="branchStartDate">Branch Start Date</label><input type="date" id="inpBranchStart"></div>
                            <div class="form-group"><label data-i18n="responsible">Responsible</label>
                                <select id="inpOnboardingResponsible">
                                    <option value="" data-i18n="selectResponsible">Select...</option>
                                    <option value="HR">HR Department</option>
                                    <option value="Admin">Admin Assistant</option>
                                    <option value="IT">IT Department</option>
                                    <option value="MR TAYSIR">MR TAYSIR</option>
                                </select>
                            </div>

                            <!--7. NOTES & ATTACHMENTS -->
                            <div class="form-section-title" data-i18n="notesAttachments">7. Notes & Attachments</div>
                            <div class="form-group" style="grid-column: span 4;">
                                <label data-i18n="notes">Notes</label>
                                <textarea id="inpNotes" placeholder="Add any additional notes or comments..."></textarea>
                            </div>
                            <div class="form-group" style="grid-column: span 4;">
                                <label data-i18n="documentUploads">Document Uploads</label>
                                <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                                    <i class="fas fa-cloud-upload-alt" style="font-size: 24px; color: var(--cc-text-muted); margin-bottom: 10px;"></i>
                                    <p data-i18n="clickAddDocuments">Click to add documents</p>
                                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelect(event)" multiple>
                                </div>
                                <div id="documentList" class="document-list"></div>
                            </div>
                        </div>

                        <!-- Existing Staff Sections -->
                        <div id="existingStaffSections" style="display: none;">
                            <!-- 8. EXISTING STAFF MAINTENANCE -->
                            <div class="form-section-title" data-i18n="ongoingMaintenance">8. Ongoing Maintenance</div>
                            <div class="form-group"><label data-i18n="passportNo">Passport No</label><input type="text" id="inpPassportNo"></div>
                            <div class="form-group"><label data-i18n="passportExpiry">Passport Expiry</label><input type="date" id="inpPassportExp"></div>
                            <div class="form-group"><label data-i18n="medicalInsuranceExpiry">Medical Insurance Expiry</label><input type="date" id="inpMedExpMain"></div>
                            <div class="form-group"><label data-i18n="visaExpiry">Visa Expiry</label><input type="date" id="inpVisaExpExisting"></div>
                            <div class="form-group"><label data-i18n="laborCardExpiry">Labor Card Expiry</label><input type="date" id="inpLaborCardExp"></div>
                            <div class="form-group"><label data-i18n="eidExpiry">EID Expiry</label><input type="date" id="inpEidExp"></div>
                            <div class="form-group" style="grid-column: span 4;">
                                <label data-i18n="notes">Notes</label>
                                <textarea id="inpNotesExisting" placeholder="Add any additional notes or comments..."></textarea>
                            </div>
                            <div class="form-group" style="grid-column: span 4;">
                                <label data-i18n="documentUploads">Document Uploads</label>
                                <div class="upload-area" onclick="document.getElementById('fileInputExisting').click()">
                                    <i class="fas fa-cloud-upload-alt" style="font-size: 24px; color: var(--cc-text-muted); margin-bottom: 10px;"></i>
                                    <p data-i18n="clickAddDocuments">Click to add documents</p>
                                    <input type="file" id="fileInputExisting" style="display: none;" onchange="handleFileSelectExisting(event)" multiple>
                                </div>
                                <div id="documentListExisting" class="document-list"></div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-reset" style="background:#999;" onclick="closeModal('staffModal')" data-i18n="cancel">Cancel</button>
                <button class="btn-add" onclick="saveStaff()"><i class="fas fa-save"></i> <span data-i18n="saveRecord">Save Record</span></button>
            </div>
        </div>
    </div>

    <!-- NOTIFICATIONS MODAL -->
    <div id="notificationsModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 style="margin:0;" data-i18n="notificationsAlerts">üì¢ Notifications & Alerts</h3>
                <button class="action-btn" onclick="closeModal('notificationsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="notificationsList">
                    <!-- Notifications will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden Print Area for Professional Report -->
    <div id="printArea">
        <div class="report-header">
            <div class="report-logo">üë®‚Äçüç≥</div>
            <div class="report-title">
                <h2 data-i18n="employeeComplianceFile">EMPLOYEE COMPLIANCE FILE</h2>
                <p data-i18n="crispyChickenHrDepartment">CRISPY CHICKEN HR DEPARTMENT</p>
                <p style="font-size: 12px; margin-top: 2px;" data-i18n="generatedOn">Generated on: <span id="printDate"></span></p>
            </div>
        </div>

        <div class="report-section">
            <h3 data-i18n="employeeDetails">1. Employee Details</h3>
            <table class="report-table">
                <tr><th data-i18n="name">Name:</th><td id="prName"></td><th data-i18n="id">ID:</th><td id="prId"></td></tr>
                <tr><th data-i18n="designation">Designation:</th><td id="prDesignation"></td><th data-i18n="branch">Branch:</th><td id="prBranch"></td></tr>
                <tr><th data-i18n="status">Status:</th><td id="prStatus"></td><th data-i18n="currentStage">Current Stage:</th><td id="prStage"></td></tr>
            </table>
        </div>

        <div class="report-section">
            <h3 data-i18n="onboardingComplianceCheck">2. Onboarding & Compliance Check</h3>
            <table class="report-table">
                <tr><th data-i18n="entryPermit">Entry Permit</th><td id="prEntry"></td><th data-i18n="medical">Medical</th><td id="prMedical"></td></tr>
                <tr><th data-i18n="emiratesId">Emirates ID</th><td id="prEID"></td><th data-i18n="visaStamping">Visa Stamping</th><td id="prVisa"></td></tr>
                <tr><th data-i18n="passportExpiry">Passport Exp.</th><td id="prPassExp"></td><th data-i18n="visaExpiry">Visa Exp.</th><td id="prVisaExp"></td></tr>
            </table>
        </div>

        <div class="report-section">
            <h3 data-i18n="onboardingTimeline">3. Onboarding Timeline</h3>
            <table class="report-table" id="onboardingTimeline">
                <tr>
                    <th data-i18n="step">Step</th>
                    <th data-i18n="plannedDate">Planned Date</th>
                    <th data-i18n="completedDate">Completed Date</th>
                    <th data-i18n="daysTaken">Days Taken</th>
                    <th data-i18n="responsible">Responsible</th>
                </tr>
                <!-- Will be populated dynamically -->
            </table>
        </div>

        <div class="report-section">
            <h3 data-i18n="actionsTaken">4. Actions Taken</h3>
            <ul id="prActions" style="font-size:13px; line-height: 1.6;"></ul>
        </div>

        <div style="text-align:center;">
            <div id="prStamp" class="status-stamp" style="display:none;" data-i18n="readyToJoin">READY TO JOIN</div>
        </div>

        <div class="signature-area">
            <div class="sign-box" data-i18n="hrManagerSignature">HR Manager Signature</div>
            <div class="sign-box" data-i18n="managerSignature">Manager Signature</div>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span data-i18n="savedSuccessfully">Saved Successfully</span>
    </div>

    <script>
        // ====================== TRANSLATIONS ======================
        const translations = {
            en: {
                appTitle: "CRISPY CHICKEN HR",
                appSubtitle: "Compliance & Onboarding Tracker",
                searchPlaceholder: "Search ID, Name...",
                allStaff: "All Staff",
                newStaff: "üîµ New Staff (Onboarding)",
                existingStaff: "üü¢ Existing Staff",
                needsAttention: "üü† Needs Attention",
                exportBtn: "Excel",
                addStaffBtn: "New Staff",
                totalStaff: "Total Staff",
                onboarding: "Onboarding",
                activeHandedOver: "Active / Handed Over",
                actionRequired: "Action Required",
                employeeDirectory: "Employee Directory & Follow-ups",
                loading: "Loading data...",
                status: "Status",
                id: "ID",
                name: "Name",
                nextStep: "Next Step / Follow Up",
                branch: "Branch",
                expiryAlerts: "Expiry Alerts (Passport/Visa)",
                actions: "Actions",
                staffDetails: "Staff Details",
                basicInfo: "1. Basic Information",
                staffType: "Staff Type",
                newStaffOption: "New Staff (Onboarding)",
                existingStaffOption: "Existing Staff",
                employeeId: "Employee ID",
                fullName: "Full Name",
                nationality: "Nationality",
                selectNationality: "Select...",
                designation: "Designation",
                selectBranch: "Select Branch",
                hireApprovalDate: "Hire Approval Date",
                entryVisa: "2. Entry & Pre-Joining (UAE)",
                entryPermitIssued: "Entry Permit Issued",
                entryPermitConfirmed: "Entry Permit Confirmed",
                entryPermitExpiry: "Entry Permit Expiry",
                dateOfEntry: "Date of Entry",
                visitVisaExpiry: "Visit Visa Expiry",
                responsible: "Responsible",
                selectResponsible: "Select...",
                immigrationLabour: "3. Immigration & Labour",
                mohreOfferIssued: "MOHRE Offer Issued",
                offerSigned: "Offer Signed",
                laborContractPrepared: "Labor Contract Prepared",
                laborContractSigned: "Labor Contract Signed",
                statusAmdtSubmitted: "Status Amdt Submitted",
                statusAmdtApproved: "Status Amdt Approved",
                workPermitIssued: "Work Permit Issued",
                cancellationExpiry: "Cancellation Expiry",
                medicalEid: "4. Medical & Emirates ID",
                medicalScheduled: "Medical Scheduled",
                medicalCompleted: "Medical Completed",
                medicalResultIssued: "Medical Result Issued",
                healthCardIssued: "Health Card Issued",
                medicalInsuranceRegistered: "Medical Insurance Registered",
                eidBiometrics: "EID Biometrics",
                eidCardPrinted: "EID Card Printed",
                eidReceived: "EID Received",
                residencyVisa: "5. Residency Visa",
                visaAppDate: "Visa App Date",
                visaIssuedDate: "Visa Issued Date",
                visaStampedPassport: "Visa Stamped in Passport",
                visaExpiry: "Visa Expiry",
                laborCardIssued: "Labor Card Issued",
                federalAuthorityRegistration: "Federal Authority Registration",
                companyOnboarding: "6. Company On-Boarding",
                bankAccountOpened: "Bank Account Opened",
                accommodationArranged: "Accommodation Arranged",
                uniformIssued: "Uniform Issued",
                equipmentHandover: "Equipment Handover",
                itSetup: "IT Setup",
                adminSetup: "Admin Setup",
                orientation: "Orientation",
                branchStartDate: "Branch Start Date",
                notesAttachments: "7. Notes & Attachments",
                notes: "Notes",
                documentUploads: "Document Uploads",
                clickAddDocuments: "Click to add documents",
                ongoingMaintenance: "8. Ongoing Maintenance",
                passportNo: "Passport No",
                passportExpiry: "Passport Expiry",
                medicalInsuranceExpiry: "Medical Insurance Expiry",
                laborCardExpiry: "Labor Card Expiry",
                eidExpiry: "EID Expiry",
                cancel: "Cancel",
                saveRecord: "Save Record",
                notificationsAlerts: "üì¢ Notifications & Alerts",
                employeeComplianceFile: "EMPLOYEE COMPLIANCE FILE",
                crispyChickenHrDepartment: "CRISPY CHICKEN HR DEPARTMENT",
                generatedOn: "Generated on:",
                employeeDetails: "1. Employee Details",
                onboardingComplianceCheck: "2. Onboarding & Compliance Check",
                entryPermit: "Entry Permit",
                medical: "Medical",
                emiratesId: "Emirates ID",
                visaStamping: "Visa Stamping",
                onboardingTimeline: "3. Onboarding Timeline",
                step: "Step",
                plannedDate: "Planned Date",
                completedDate: "Completed Date",
                daysTaken: "Days Taken",
                actionsTaken: "4. Actions Taken",
                readyToJoin: "READY TO JOIN",
                hrManagerSignature: "HR Manager Signature",
                managerSignature: "Manager Signature",
                savedSuccessfully: "Saved Successfully",
                employeeAddedSuccessfully: "Employee added successfully",
                employeeUpdatedSuccessfully: "Employee updated successfully",
                employeeDeletedSuccessfully: "Employee deleted successfully",
                employeeNotFound: "Employee not found",
                employeeIdRequired: "Employee ID is required",
                employeeNameRequired: "Employee name is required",
                employeeIdAlreadyExists: "Employee ID \"{id}\" already exists",
                noEmployeesFound: "No employees found",
                addFirstEmployee: "Add your first employee using the \"New Staff\" button",
                showingEmployees: "Showing {count} of {total} employees",
                noDataToExport: "No data to export",
                dataExportedSuccessfully: "Data exported successfully",
                viewingDocument: "Viewing document: {name}",
                noDocumentsUploaded: "No documents uploaded",
                noAlerts: "No alerts",
                allEmployeesUpToDate: "All employees are up to date",
                clickArrowToView: "Click arrow to view",
                documentsExpired: "Documents Expired",
                documentsExpiringIn: "{item} expiring in {days} days",
                entryPermitConfirmationOverdue: "Entry Permit confirmation overdue ({days} days)",
                areYouSureDelete: "Are you sure you want to delete employee {id}? This action cannot be undone.",
                errorOccurred: "An error occurred while saving. Please try again.",
                pending: "Pending",
                done: "Done",
                new: "NEW",
                existing: "EXS",
                ready: "‚úÖ Ready",
                inProcess: "‚öôÔ∏è In Process",
                expired: "üî¥ Expired",
                expiringSoon: "üü† Expiring Soon",
                active: "‚úÖ Active",
                routineMonitoring: "Routine Monitoring",
                approveHireDate: "Approve Hire Date",
                issueEntryPermit: "Issue Entry Permit",
                confirmEntryPermitReceived: "Confirm Entry Permit Received",
                recordEntryDate: "Record Entry Date",
                prepareSignLaborContract: "Prepare & Sign Labor Contract",
                scheduleMedicalGetResult: "Schedule Medical / Get Result",
                activateMedicalInsurance: "Activate Medical Insurance",
                waitForEidDelivery: "Wait for EID Delivery",
                issueVisa: "Issue Visa",
                stampVisaInPassport: "Stamp Visa in Passport",
                openBankAccount: "Open Bank Account",
                sendToRestaurantHandover: "Send to Restaurant (Handover)",
                readyForHandover: "Ready for Handover",
                systemResetWarning: "WARNING: This will delete ALL employee data permanently. This cannot be undone!",
                systemResetConfirm: "Are you absolutely sure you want to delete all data?",
                systemResetSuccess: "System reset successfully. All data cleared."
            },
            ar: {
                appTitle: "ŸÖŸàÿßÿ±ÿØ ÿ®ÿ¥ÿ±Ÿäÿ© ŸÉÿ±Ÿäÿ≥ÿ®Ÿä ÿ™ÿ¥ŸäŸÉŸÜ",
                appSubtitle: "ŸÜÿ∏ÿßŸÖ ÿßŸÑÿßŸÖÿ™ÿ´ÿßŸÑ ŸàÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ",
                searchPlaceholder: "ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿ±ŸÇŸÖÿå ÿßŸÑÿßÿ≥ŸÖ...",
                allStaff: "ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ",
                newStaff: "üîµ ŸÖŸàÿ∏ŸÅŸàŸÜ ÿ¨ÿØÿØ (ŸÇŸäÿØ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ)",
                existingStaff: "üü¢ ŸÖŸàÿ∏ŸÅŸàŸÜ ÿ≠ÿßŸÑŸäŸàŸÜ",
                needsAttention: "üü† Ÿäÿ≠ÿ™ÿßÿ¨ ŸÖÿ™ÿßÿ®ÿπÿ©",
                exportBtn: "ÿ•ŸÉÿ≥ŸÑ",
                addStaffBtn: "ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ",
                totalStaff: "ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ",
                onboarding: "ŸÇŸäÿØ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ",
                activeHandedOver: "ŸÜÿ¥ÿ∑ / ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",
                actionRequired: "ŸÖÿ∑ŸÑŸàÿ® ÿ•ÿ¨ÿ±ÿßÿ°",
                employeeDirectory: "ÿØŸÑŸäŸÑ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ ŸàÿßŸÑŸÖÿ™ÿßÿ®ÿπÿßÿ™",
                loading: "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...",
                status: "ÿßŸÑÿ≠ÿßŸÑÿ©",
                id: "ÿßŸÑÿ±ŸÇŸÖ",
                name: "ÿßŸÑÿßÿ≥ŸÖ",
                nextStep: "ÿßŸÑÿÆÿ∑Ÿàÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ© / ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©",
                branch: "ÿßŸÑŸÅÿ±ÿπ",
                expiryAlerts: "ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ© (ÿ¨Ÿàÿßÿ≤/ÿ™ÿ£ÿ¥Ÿäÿ±ÿ©)",
                actions: "ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™",
                staffDetails: "ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸàÿ∏ŸÅ",
                basicInfo: "1. ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©",
                staffType: "ŸÜŸàÿπ ÿßŸÑŸÖŸàÿ∏ŸÅ",
                newStaffOption: "ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ (ŸÇŸäÿØ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ)",
                existingStaffOption: "ŸÖŸàÿ∏ŸÅ ÿ≠ÿßŸÑŸä",
                employeeId: "ÿ±ŸÇŸÖ ÿßŸÑŸÖŸàÿ∏ŸÅ",
                fullName: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
                nationality: "ÿßŸÑÿ¨ŸÜÿ≥Ÿäÿ©",
                selectNationality: "ÿßÿÆÿ™ÿ±...",
                designation: "ÿßŸÑŸÖŸÜÿµÿ®",
                selectBranch: "ÿßÿÆÿ™ÿ± ÿßŸÑŸÅÿ±ÿπ",
                hireApprovalDate: "ÿ™ÿßÿ±ŸäÿÆ ŸÖŸàÿßŸÅŸÇÿ© ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ",
                entryVisa: "2. ÿßŸÑÿØÿÆŸàŸÑ ŸàŸÖÿß ŸÇÿ®ŸÑ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ (ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™)",
                entryPermitIssued: "ÿ•ÿµÿØÿßÿ± ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ",
                entryPermitConfirmed: "ÿ™ÿ£ŸÉŸäÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ",
                entryPermitExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ",
                dateOfEntry: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿØÿÆŸàŸÑ",
                visitVisaExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿ™ÿ£ÿ¥Ÿäÿ±ÿ© ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©",
                responsible: "ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ",
                selectResponsible: "ÿßÿÆÿ™ÿ±...",
                immigrationLabour: "3. ÿßŸÑŸáÿ¨ÿ±ÿ© ŸàÿßŸÑÿπŸÖŸÑ",
                mohreOfferIssued: "ÿ•ÿµÿØÿßÿ± ÿπÿ±ÿ∂ Ÿàÿ≤ÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿ±ÿØ ÿßŸÑÿ®ÿ¥ÿ±Ÿäÿ©",
                offerSigned: "ÿ™ŸàŸÇŸäÿπ ÿßŸÑÿπÿ±ÿ∂",
                laborContractPrepared: "ÿ•ÿπÿØÿßÿØ ÿπŸÇÿØ ÿßŸÑÿπŸÖŸÑ",
                laborContractSigned: "ÿ™ŸàŸÇŸäÿπ ÿπŸÇÿØ ÿßŸÑÿπŸÖŸÑ",
                statusAmdtSubmitted: "ÿ™ŸÇÿØŸäŸÖ ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ≠ÿßŸÑÿ©",
                statusAmdtApproved: "ŸÖŸàÿßŸÅŸÇÿ© ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ≠ÿßŸÑÿ©",
                workPermitIssued: "ÿ•ÿµÿØÿßÿ± ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿπŸÖŸÑ",
                cancellationExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°",
                medicalEid: "4. ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ∑ÿ®Ÿä ŸàÿßŸÑŸáŸàŸäÿ© ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™Ÿäÿ©",
                medicalScheduled: "ŸÖŸàÿßÿπŸäÿØ ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ∑ÿ®Ÿä",
                medicalCompleted: "ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ∑ÿ®Ÿä",
                medicalResultIssued: "ÿ•ÿµÿØÿßÿ± ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ∑ÿ®Ÿä",
                healthCardIssued: "ÿ•ÿµÿØÿßÿ± ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑÿµÿ≠Ÿäÿ©",
                medicalInsuranceRegistered: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ™ÿ£ŸÖŸäŸÜ ÿßŸÑÿµÿ≠Ÿä",
                eidBiometrics: "ÿßŸÑÿ®ÿµŸÖÿßÿ™ ŸÑŸÑŸáŸàŸäÿ© ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™Ÿäÿ©",
                eidCardPrinted: "ÿ∑ÿ®ÿßÿπÿ© ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑŸáŸàŸäÿ©",
                eidReceived: "ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑŸáŸàŸäÿ©",
                residencyVisa: "5. ÿ™ÿ£ÿ¥Ÿäÿ±ÿ© ÿßŸÑÿ•ŸÇÿßŸÖÿ©",
                visaAppDate: "ÿ™ÿßÿ±ŸäÿÆ ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ©",
                visaIssuedDate: "ÿ™ÿßÿ±ŸäÿÆ ÿ•ÿµÿØÿßÿ± ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ©",
                visaStampedPassport: "ÿÆÿ™ŸÖ ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ© ŸÅŸä ÿ¨Ÿàÿßÿ≤ ÿßŸÑÿ≥ŸÅÿ±",
                visaExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ©",
                laborCardIssued: "ÿ•ÿµÿØÿßÿ± ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑÿπŸÖŸÑ",
                federalAuthorityRegistration: "ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ÿßŸÑŸáŸäÿ¶ÿ© ÿßŸÑÿßÿ™ÿ≠ÿßÿØŸäÿ©",
                companyOnboarding: "6. ÿßŸÜÿ∂ŸÖÿßŸÖ ÿßŸÑÿ¥ÿ±ŸÉÿ©",
                bankAccountOpened: "ŸÅÿ™ÿ≠ ÿ≠ÿ≥ÿßÿ® ÿ®ŸÜŸÉŸä",
                accommodationArranged: "ÿ™ÿ±ÿ™Ÿäÿ®ÿßÿ™ ÿßŸÑÿ≥ŸÉŸÜ",
                uniformIssued: "ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ≤Ÿä ÿßŸÑÿ±ÿ≥ŸÖŸä",
                equipmentHandover: "ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑŸÖÿπÿØÿßÿ™",
                itSetup: "ÿ•ÿπÿØÿßÿØ ÿ™ŸÇŸÜŸäÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™",
                adminSetup: "ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ•ÿØÿßÿ±ÿ©",
                orientation: "ÿßŸÑÿ™Ÿàÿ¨ŸäŸá",
                branchStartDate: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑŸÅÿ±ÿπ",
                notesAttachments: "7. ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸàŸÖÿ±ŸÅŸÇÿßÿ™",
                notes: "ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™",
                documentUploads: "ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™",
                clickAddDocuments: "ÿßŸÜŸÇÿ± ŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™",
                ongoingMaintenance: "8. ÿßŸÑÿµŸäÿßŸÜÿ© ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±ÿ©",
                passportNo: "ÿ±ŸÇŸÖ ÿ¨Ÿàÿßÿ≤ ÿßŸÑÿ≥ŸÅÿ±",
                passportExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿ¨Ÿàÿßÿ≤ ÿßŸÑÿ≥ŸÅÿ±",
                medicalInsuranceExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ™ÿ£ŸÖŸäŸÜ ÿßŸÑÿµÿ≠Ÿä",
                laborCardExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑÿπŸÖŸÑ",
                eidExpiry: "ÿßŸÜÿ™Ÿáÿßÿ° ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸáŸàŸäÿ©",
                cancel: "ÿ•ŸÑÿ∫ÿßÿ°",
                saveRecord: "ÿ≠ŸÅÿ∏ ÿßŸÑÿ≥ÿ¨ŸÑ",
                notificationsAlerts: "üì¢ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸàÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™",
                employeeComplianceFile: "ŸÖŸÑŸÅ ÿßŸÖÿ™ÿ´ÿßŸÑ ÿßŸÑŸÖŸàÿ∏ŸÅ",
                crispyChickenHrDepartment: "ŸÇÿ≥ŸÖ ÿßŸÑŸÖŸàÿßÿ±ÿØ ÿßŸÑÿ®ÿ¥ÿ±Ÿäÿ© - ŸÉÿ±Ÿäÿ≥ÿ®Ÿä ÿ™ÿ¥ŸäŸÉŸÜ",
                generatedOn: "ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ° ŸÅŸä:",
                employeeDetails: "1. ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸàÿ∏ŸÅ",
                onboardingComplianceCheck: "2. ŸÅÿ≠ÿµ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ŸàÿßŸÑÿßŸÖÿ™ÿ´ÿßŸÑ",
                entryPermit: "ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ",
                medical: "ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ∑ÿ®Ÿä",
                emiratesId: "ÿßŸÑŸáŸàŸäÿ© ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™Ÿäÿ©",
                visaStamping: "ÿÆÿ™ŸÖ ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ©",
                onboardingTimeline: "3. ÿßŸÑÿ¨ÿØŸàŸÑ ÿßŸÑÿ≤ŸÖŸÜŸä ŸÑŸÑÿßŸÜÿ∂ŸÖÿßŸÖ",
                step: "ÿßŸÑÿÆÿ∑Ÿàÿ©",
                plannedDate: "ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖÿÆÿ∑ÿ∑",
                completedDate: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ŸÜÿ¨ÿßÿ≤",
                daysTaken: "ÿßŸÑÿ£ŸäÿßŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿ∫ÿ±ŸÇÿ©",
                actionsTaken: "4. ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑŸÖÿ™ÿÆÿ∞ÿ©",
                readyToJoin: "ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßŸÜÿ∂ŸÖÿßŸÖ",
                hrManagerSignature: "ÿ™ŸàŸÇŸäÿπ ŸÖÿØŸäÿ± ÿßŸÑŸÖŸàÿßÿ±ÿØ ÿßŸÑÿ®ÿ¥ÿ±Ÿäÿ©",
                managerSignature: "ÿ™ŸàŸÇŸäÿπ ÿßŸÑŸÖÿØŸäÿ±",
                savedSuccessfully: "ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ÿ®ŸÜÿ¨ÿßÿ≠",
                employeeAddedSuccessfully: "ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠",
                employeeUpdatedSuccessfully: "ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠",
                employeeDeletedSuccessfully: "ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠",
                employeeNotFound: "ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ",
                employeeIdRequired: "ÿ±ŸÇŸÖ ÿßŸÑŸÖŸàÿ∏ŸÅ ŸÖÿ∑ŸÑŸàÿ®",
                employeeNameRequired: "ÿßÿ≥ŸÖ ÿßŸÑŸÖŸàÿ∏ŸÅ ŸÖÿ∑ŸÑŸàÿ®",
                employeeIdAlreadyExists: "ÿ±ŸÇŸÖ ÿßŸÑŸÖŸàÿ∏ŸÅ \"{id}\" ŸÖŸàÿ¨ŸàÿØ ÿ®ÿßŸÑŸÅÿπŸÑ",
                noEmployeesFound: "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖŸàÿ∏ŸÅŸäŸÜ",
                addFirstEmployee: "ÿ£ÿ∂ŸÅ ÿ£ŸàŸÑ ŸÖŸàÿ∏ŸÅ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ≤ÿ± \"ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ\"",
                showingEmployees: "ÿπÿ±ÿ∂ {count} ŸÖŸÜ {total} ŸÖŸàÿ∏ŸÅ",
                noDataToExport: "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÑÿ™ÿµÿØŸäÿ±",
                dataExportedSuccessfully: "ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠",
                viewingDocument: "ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ: {name}",
                noDocumentsUploaded: "ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™",
                noAlerts: "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸÜÿ®ŸäŸáÿßÿ™",
                allEmployeesUpToDate: "ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ ŸÖÿ≠ÿØÿ´ŸàŸÜ",
                clickArrowToView: "ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ≥ŸáŸÖ ŸÑŸÑÿπÿ±ÿ∂",
                documentsExpired: "ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÖŸÜÿ™ŸáŸäÿ©",
                documentsExpiringIn: "{item} ÿ™ŸÜÿ™ŸáŸä ÿµŸÑÿßÿ≠Ÿäÿ™Ÿá ÿÆŸÑÿßŸÑ {days} ÿ£ŸäÿßŸÖ",
                entryPermitConfirmationOverdue: "ÿ™ÿ£ŸÉŸäÿØ ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ™ÿ£ÿÆÿ± ({days} ŸäŸàŸÖ)",
                areYouSureDelete: "ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸàÿ∏ŸÅ {id}ÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°.",
                errorOccurred: "ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ≠ŸÅÿ∏. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.",
                pending: "ŸÖÿπŸÑŸÇ",
                done: "ÿ™ŸÖ",
                new: "ÿ¨ÿØŸäÿØ",
                existing: "ÿ≠ÿßŸÑŸä",
                ready: "‚úÖ ÿ¨ÿßŸáÿ≤",
                inProcess: "‚öôÔ∏è ŸÇŸäÿØ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",
                expired: "üî¥ ŸÖŸÜÿ™ŸáŸä",
                expiringSoon: "üü† ŸäŸÜÿ™ŸáŸä ŸÇÿ±Ÿäÿ®ÿßŸã",
                active: "‚úÖ ŸÜÿ¥ÿ∑",
                routineMonitoring: "ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ±Ÿàÿ™ŸäŸÜŸäÿ©",
                approveHireDate: "ŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ",
                issueEntryPermit: "ÿ•ÿµÿØÿßÿ± ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ",
                confirmEntryPermitReceived: "ÿ™ÿ£ŸÉŸäÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ™ÿµÿ±Ÿäÿ≠ ÿßŸÑÿØÿÆŸàŸÑ",
                recordEntryDate: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿØÿÆŸàŸÑ",
                prepareSignLaborContract: "ÿ•ÿπÿØÿßÿØ Ÿàÿ™ŸàŸÇŸäÿπ ÿπŸÇÿØ ÿßŸÑÿπŸÖŸÑ",
                scheduleMedicalGetResult: "ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàÿπÿØ ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑÿ∑ÿ®Ÿä / ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©",
                activateMedicalInsurance: "ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ£ŸÖŸäŸÜ ÿßŸÑÿµÿ≠Ÿä",
                waitForEidDelivery: "ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑŸáŸàŸäÿ©",
                issueVisa: "ÿ•ÿµÿØÿßÿ± ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ©",
                stampVisaInPassport: "ÿÆÿ™ŸÖ ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿ© ŸÅŸä ÿ¨Ÿàÿßÿ≤ ÿßŸÑÿ≥ŸÅÿ±",
                openBankAccount: "ŸÅÿ™ÿ≠ ÿ≠ÿ≥ÿßÿ® ÿ®ŸÜŸÉŸä",
                sendToRestaurantHandover: "ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ∑ÿπŸÖ (ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ)",
                readyForHandover: "ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ÿ≥ŸÑŸäŸÖ",
                systemResetWarning: "ÿ™ÿ≠ÿ∞Ÿäÿ±: ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ ÿ®ÿ¥ŸÉŸÑ ÿØÿßÿ¶ŸÖ. ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°!",
                systemResetConfirm: "ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ÿ™ŸÖÿßŸÖŸãÿß ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿü",
                systemResetSuccess: "ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ®ŸÜÿ¨ÿßÿ≠. ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™."
            }
        };

        let currentLang = localStorage.getItem('cc_hr_lang') || 'en';

        // ====================== CONFIGURATION ======================
        const STORAGE_KEY = 'crispy_chicken_hr_system_v2.3'; // Updated version
        const INIT_FLAG_KEY = 'cc_hr_initialized'; // Flag to check if user has used system before
        let employees = [];
        let filteredEmployees = [];
        let documents = []; // Store uploaded documents
        let documentsExisting = []; // Store existing staff documents

        // ====================== INITIALIZATION ======================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Crispy Chicken HR System Initializing...');
            
            // Load language preference
            const savedLang = localStorage.getItem('cc_hr_lang') || 'en';
            currentLang = savedLang;
            updateLanguage();
            
            // Load theme preference
            const savedTheme = localStorage.getItem('cc_hr_theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Load data
            loadData();
            
            // Set today's date in form
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('inpHireDate').value = today;
            
            // Set maximum dates to today for date inputs
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                input.max = today;
            });
            
            console.log('‚úÖ System initialized successfully');
        });

        // ====================== LANGUAGE FUNCTIONS ======================
        function updateLanguage() {
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = translations[currentLang][key] || translations['en'][key];
                
                if (element.tagName === 'INPUT' && element.type === 'text') {
                    element.placeholder = translation;
                } else if (element.tagName === 'OPTION') {
                    element.textContent = translation;
                } else {
                    element.textContent = translation;
                }
            });
            
            // Update language toggle button
            document.getElementById('langText').textContent = currentLang === 'ar' ? 'English' : 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©';
            
            // Update select options
            updateSelectOptions();
            
            // Update UI
            updateUI();
        }

        function updateSelectOptions() {
            // Update filter select
            const typeFilter = document.getElementById('typeFilter');
            if (typeFilter) {
                const options = typeFilter.querySelectorAll('option');
                options.forEach(option => {
                    const key = option.getAttribute('data-i18n');
                    if (key) {
                        option.textContent = translations[currentLang][key] || translations['en'][key];
                    }
                });
            }
        }

        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            localStorage.setItem('cc_hr_lang', currentLang);
            updateLanguage();
        }

        function t(key, params = {}) {
            let translation = translations[currentLang][key] || translations['en'][key];
            
            // Replace parameters
            Object.keys(params).forEach(param => {
                translation = translation.replace(`{${param}}`, params[param]);
            });
            
            return translation;
        }

        // ====================== DATA MANAGEMENT ======================
        function loadData() {
            console.log('üìÇ Loading data from localStorage...');
            const stored = localStorage.getItem(STORAGE_KEY);
            const isInitialized = localStorage.getItem(INIT_FLAG_KEY);
            
            if (stored) {
                try {
                    employees = JSON.parse(stored);
                    console.log(`‚úÖ Loaded ${employees.length} employee(s)`);
                } catch (error) {
                    console.error('‚ùå Error parsing data:', error);
                    employees = [];
                }
            }
            
            // FIX FOR DATA COMING BACK BUG:
            // Only load sample data if the system has NEVER been initialized before.
            // If the user has used it (isInitialized = true) and the array is empty,
            // it means they deleted it, and we should keep it empty.
            if (!isInitialized) {
                console.log('üìù First time setup: Creating sample data...');
                employees = getSampleData();
                localStorage.setItem(INIT_FLAG_KEY, 'true');
                saveData();
            } else {
                console.log('üìÇ System initialized. Loading saved state (might be empty).');
            }
            
            updateUI();
        }

        function getSampleData() {
            return [
                {
                    id: "CC001",
                    name: "Mohamed Ahmed",
                    staffType: "existing",
                    nationality: "Egyptian",
                    designation: "Restaurant Manager",
                    branch: "CC Hamdan St",
                    hireDate: "2023-01-15",
                    passportExp: "2025-06-30",
                    visaExp: "2024-12-31",
                    medExpMain: "2024-12-31",
                    lastUpdated: new Date().toISOString(),
                    documents: []
                },
                {
                    id: "CC002",
                    name: "Fatima Khan",
                    staffType: "new",
                    nationality: "Bangladeshi",
                    designation: "Cashier",
                    branch: "CC Khaldia",
                    hireDate: "2024-02-01",
                    entryIssued: "2024-02-05",
                    entryConfirmed: "2024-02-07",
                    dateEntry: "2024-02-10",
                    mohreOffer: "2024-02-15",
                    laborContract: "2024-02-17",
                    laborSigned: "2024-02-18",
                    medResult: "2024-02-20",
                    medInsurance: "2024-02-22",
                    eidBio: "2024-02-24",
                    eidRec: "2024-03-01",
                    visaIssued: "2024-03-05",
                    visaStamped: "2024-03-07",
                    bankAccount: "2024-03-10",
                    itSetup: "Done",
                    adminSetup: "Done",
                    orientation: "Done",
                    lastUpdated: new Date().toISOString(),
                    documents: [
                        { id: 1, name: "Passport Copy", date: "2024-02-01", type: "passport" },
                        { id: 2, name: "Medical Report", date: "2024-02-20", type: "medical" }
                    ]
                },
                {
                    id: "CC003",
                    name: "John Smith",
                    staffType: "existing",
                    nationality: "Indian",
                    designation: "Chef",
                    branch: "CC Muroor",
                    hireDate: "2023-03-10",
                    passportExp: "2024-03-01", // Expiring soon
                    visaExp: "2024-06-15",
                    medExpMain: "2024-05-20",
                    lastUpdated: new Date().toISOString(),
                    documents: []
                }
            ];
        }

        function saveData() {
            console.log('üíæ Saving data...');
            localStorage.setItem(STORAGE_KEY, JSON.stringify(employees));
            updateUI();
            updateNotifications();
        }

        // ====================== RESET SYSTEM FUNCTION ======================
        function resetSystem() {
            // Double confirmation for safety
            const confirmMsg = t('systemResetWarning');
            const finalMsg = t('systemResetConfirm');
            
            if (!confirm(confirmMsg)) return;
            if (!confirm(finalMsg)) return;
            
            console.log('üóëÔ∏è Resetting System...');
            
            // 1. Clear the employees array
            employees = [];
            documents = [];
            documentsExisting = [];
            
            // 2. Save the empty array to localStorage
            // We DO NOT remove the 'INIT_FLAG_KEY'. This keeps the system "initialized",
            // which prevents the sample data from coming back on refresh.
            localStorage.setItem(STORAGE_KEY, JSON.stringify([]));
            
            // 3. Update UI
            updateUI();
            showToast(t('systemResetSuccess'), 'success');
        }

        // ====================== BUSINESS LOGIC ======================
        function getExpiryStatus(dateStr) {
            if (!dateStr) return { label: '-', class: '', warning: false, urgent: false, daysLeft: null };
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const target = new Date(dateStr);
            target.setHours(0, 0, 0, 0);
            
            const diffTime = target - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            if (diffDays <= 0) return { label: t('expired'), class: 'date-expired', warning: false, urgent: true, daysLeft: 0 };
            if (diffDays <= 15) return { label: t('documentsExpiringIn', { days: diffDays }), class: 'date-warning', warning: true, urgent: false, daysLeft: diffDays };
            return { label: `${diffDays} Days`, class: '', warning: false, urgent: false, daysLeft: diffDays };
        }

        function getNextStep(emp) {
            if (emp.staffType !== 'new') return null;

            if (!emp.hireDate) return { step: t('approveHireDate'), priority: "high" };
            if (!emp.entryIssued) return { step: t('issueEntryPermit'), priority: "high" };
            if (!emp.entryConfirmed) return { step: t('confirmEntryPermitReceived'), priority: "high" };
            if (!emp.dateEntry) return { step: t('recordEntryDate'), priority: "high" };
            if (!emp.laborContract) return { step: t('prepareSignLaborContract'), priority: "high" };
            if (!emp.medResult) return { step: t('scheduleMedicalGetResult'), priority: "medium" };
            if (!emp.medInsurance) return { step: t('activateMedicalInsurance'), priority: "high" };
            if (!emp.eidRec) return { step: t('waitForEidDelivery'), priority: "medium" };
            if (!emp.visaIssued) return { step: t('issueVisa'), priority: "high" };
            if (!emp.visaStamped) return { step: t('stampVisaInPassport'), priority: "high" };
            if (!emp.bankAccount) return { step: t('openBankAccount'), priority: "medium" };
            if (!emp.branchStartDate) return { step: t('sendToRestaurantHandover'), priority: "high" };
            
            return { step: t('readyForHandover'), priority: "completed" };
        }

        function getOverallStatus(emp) {
            if (emp.staffType === 'new') {
                const step = getNextStep(emp);
                if (step.step === t('readyForHandover')) return { 
                    label: t('ready'), 
                    class: "status-ok", 
                    color: "#10b981",
                    category: "ready"
                };
                return { 
                    label: t('inProcess'), 
                    class: "status-process", 
                    color: "#3b82f6",
                    category: "process"
                };
            }

            const pass = getExpiryStatus(emp.passportExp);
            const visa = getExpiryStatus(emp.visaExp || emp.visaExpExisting);
            const med = getExpiryStatus(emp.medExpMain);

            if (pass.urgent || visa.urgent || med.urgent) return { 
                label: t('expired'), 
                class: "status-expired", 
                color: "#dc3545",
                category: "expired"
            };
            if (pass.warning || visa.warning || med.warning) return { 
                label: t('expiringSoon'), 
                class: "status-warning", 
                color: "#f59e0b",
                category: "warning"
            };
            return { 
                label: t('active'), 
                class: "status-ok", 
                color: "#10b981",
                category: "active"
            };
        }

        function getStepResponsible(step) {
            const responsibilities = {
                [t('issueEntryPermit')]: "PRO Department",
                [t('confirmEntryPermitReceived')]: "PRO Department",
                [t('prepareSignLaborContract')]: "HR Department",
                [t('scheduleMedicalGetResult')]: "HR Assistant",
                [t('activateMedicalInsurance')]: "HR Department",
                [t('waitForEidDelivery')]: "PRO Department",
                [t('issueVisa')]: "PRO Department",
                [t('stampVisaInPassport')]: "PRO Department",
                [t('openBankAccount')]: "HR Assistant",
                [t('sendToRestaurantHandover')]: "Branch Manager"
            };
            
            return responsibilities[step] || "HR Department";
        }

        // ====================== UI RENDERING ======================
        function updateUI() {
            console.log('üîÑ Updating UI...');
            
            const tbody = document.getElementById('employeeTableBody');
            const tableCount = document.getElementById('tableCount');
            const loading = document.getElementById('tableLoading');
            
            // Show loading
            loading.style.display = 'block';
            tbody.innerHTML = '';
            
            // Apply filters
            filterData();
            
            setTimeout(() => {
                loading.style.display = 'none';
                
                if (filteredEmployees.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="8">
                                <div class="empty-state">
                                    <i class="fas fa-users"></i>
                                    <h3>${t('noEmployeesFound')}</h3>
                                    <p>${t('addFirstEmployee')}</p>
                                </div>
                            </td>
                        </tr>
                    `;
                    tableCount.textContent = t('showingEmployees', { count: 0, total: employees.length });
                    return;
                }
                
                let countNew = 0, countActive = 0, countAlert = 0;
                let notificationCount = 0;

                filteredEmployees.forEach(emp => {
                    const status = getOverallStatus(emp);
                    const nextStep = getNextStep(emp);
                    
                    if (emp.staffType === 'new') countNew++;
                    if (status.category === 'active' || status.category === 'ready') countActive++;
                    if (status.category === 'warning' || status.category === 'expired') {
                        countAlert++;
                        notificationCount++;
                    }
                    
                    if (emp.staffType === 'new' && status.category === 'process') {
                        notificationCount++;
                    }

                    const tr = document.createElement('tr');
                    if (status.category === 'warning' || status.category === 'expired') {
                        tr.className = 'alert-row';
                    } else if (emp.staffType === 'new') {
                        tr.className = 'new-staff-row';
                    }

                    let expiryHTML = `<span style="color:#aaa;">-</span>`;
                    if (emp.staffType === 'existing') {
                        const pass = getExpiryStatus(emp.passportExp);
                        const visa = getExpiryStatus(emp.visaExp || emp.visaExpExisting);
                        expiryHTML = `
                            <div><small>Pass:</small> <span class="${pass.class}">${pass.label}</span></div>
                            <div style="margin-top:2px;"><small>Visa:</small> <span class="${visa.class}">${visa.label}</span></div>
                        `;
                    }

                    const stepHTML = emp.staffType === 'new' 
                        ? `<span class="next-step-badge" title="${nextStep.step}">${nextStep.step}</span>` 
                        : `<span class="next-step-badge" style="border-left-color:#ccc">${t('routineMonitoring')}</span>`;

                    tr.innerHTML = `
                        <td><span class="badge ${status.class}">${emp.staffType === 'new' ? t('new') : t('existing')}</span></td>
                        <td><strong>${emp.id}</strong></td>
                        <td>
                            <div style="font-weight: 600;">${emp.name}</div>
                            <small style="color:#888">${emp.designation || ''} ‚Ä¢ ${emp.nationality || ''}</small>
                        </td>
                        <td>${stepHTML}</td>
                        <td>${emp.branch}</td>
                        <td>${expiryHTML}</td>
                        <td><span style="font-weight:bold; color:${status.color}">${status.label}</span></td>
                        <td>
                            <button class="action-btn btn-edit" onclick="editEmployee('${emp.id}')" title="${t('edit')}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn btn-print" onclick="printReport('${emp.id}')" title="${t('print')}"><i class="fas fa-print"></i></button>
                            <button class="action-btn btn-del" onclick="deleteEmployee('${emp.id}')" title="${t('delete')}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });

                // Update counters
                document.getElementById('totalCount').innerText = employees.length;
                document.getElementById('newCount').innerText = countNew;
                document.getElementById('activeCount').innerText = countActive;
                document.getElementById('alertCount').innerText = countAlert;
                tableCount.textContent = t('showingEmployees', { count: filteredEmployees.length, total: employees.length });

                // Update notification badge
                const badge = document.getElementById('notifCount');
                if (notificationCount > 0) {
                    badge.style.display = 'block';
                    badge.innerText = notificationCount;
                } else {
                    badge.style.display = 'none';
                }
                
                console.log('‚úÖ UI updated successfully');
            }, 300);
        }

        // ====================== FILTERING ======================
        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const typeFilter = document.getElementById('typeFilter').value;
            
            filteredEmployees = employees.filter(emp => {
                // Search filter
                const matchesSearch = !searchTerm || 
                    emp.id.toLowerCase().includes(searchTerm) || 
                    emp.name.toLowerCase().includes(searchTerm) ||
                    (emp.designation && emp.designation.toLowerCase().includes(searchTerm)) ||
                    (emp.branch && emp.branch.toLowerCase().includes(searchTerm));
                
                // Type filter
                let matchesType = true;
                if (typeFilter === 'new') {
                    matchesType = emp.staffType === 'new';
                } else if (typeFilter === 'existing') {
                    matchesType = emp.staffType === 'existing';
                } else if (typeFilter === 'alert') {
                    const status = getOverallStatus(emp);
                    matchesType = status.category === 'warning' || status.category === 'expired' || 
                                 (emp.staffType === 'new' && status.category === 'process');
                }
                
                return matchesSearch && matchesType;
            });
        }

        // ====================== MODAL MANAGEMENT ======================
        function openAddModal() {
            console.log('‚ûï Opening add modal...');
            
            // Reset form
            document.getElementById('staffForm').reset();
            document.getElementById('editId').value = "";
            
            // Reset document list
            documents = [];
            documentsExisting = [];
            updateDocumentList();
            updateDocumentListExisting();
            
            // Set modal title
            document.getElementById('modalTitle').innerText = t('staffDetails');
            
            // Set default values
            document.getElementById('inpStaffType').value = "new";
            toggleFieldsByType();
            
            // Set today's date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('inpHireDate').value = today;
            
            // Generate ID
            const lastNum = employees.length > 0 ? 
                Math.max(...employees.map(e => {
                    const match = e.id.match(/\d+/);
                    return match ? parseInt(match[0]) : 0;
                })) : 0;
            const newId = `CC${String(lastNum + 1).padStart(3, '0')}`;
            document.getElementById('inpId').value = newId;
            
            // Open modal
            openModal('staffModal');
            
            // Focus on name field
            setTimeout(() => {
                document.getElementById('inpName').focus();
            }, 100);
        }

        function editEmployee(id) {
            console.log(`‚úèÔ∏è Editing employee: ${id}`);
            const emp = employees.find(e => e.id === id);
            if (!emp) {
                showToast(t('employeeNotFound'), 'error');
                return;
            }
            
            // Map all fields
            const fieldMap = {
                'inpStaffType': 'staffType',
                'inpId': 'id',
                'inpName': 'name',
                'inpNationality': 'nationality',
                'inpDesignation': 'designation',
                'inpBranch': 'branch',
                'inpHireDate': 'hireDate',
                'inpEntryIssued': 'entryIssued',
                'inpEntryConfirmed': 'entryConfirmed',
                'inpEntryExp': 'entryExp',
                'inpDateEntry': 'dateEntry',
                'inpVisitVisaExp': 'visitVisaExp',
                'inpMohreOffer': 'mohreOffer',
                'inpOfferSigned': 'offerSigned',
                'inpLaborContract': 'laborContract',
                'inpLaborSigned': 'laborSigned',
                'inpStatusSub': 'statusSub',
                'inpStatusApp': 'statusApp',
                'inpWorkPermit': 'workPermit',
                'inpCancelExp': 'cancelExp',
                'inpMedSch': 'medSch',
                'inpMedComp': 'medComp',
                'inpMedResult': 'medResult',
                'inpHealthCard': 'healthCard',
                'inpMedInsurance': 'medInsurance',
                'inpEidBio': 'eidBio',
                'inpEidCardPrinted': 'eidCardPrinted',
                'inpEidRec': 'eidRec',
                'inpVisaApp': 'visaApp',
                'inpVisaIssued': 'visaIssued',
                'inpVisaStamped': 'visaStamped',
                'inpVisaExp': 'visaExp',
                'inpLaborCard': 'laborCard',
                'inpFedAuthReg': 'fedAuthReg',
                'inpBankAccount': 'bankAccount',
                'inpAccommodation': 'accommodation',
                'inpUniform': 'uniform',
                'inpEquipment': 'equipment',
                'inpItSetup': 'itSetup',
                'inpAdminSetup': 'adminSetup',
                'inpOrientation': 'orientation',
                'inpBranchStart': 'branchStartDate',
                'inpNotes': 'notes',
                'inpPassportNo': 'passportNo',
                'inpPassportExp': 'passportExp',
                'inpMedExpMain': 'medExpMain',
                'inpVisaExpExisting': 'visaExpExisting',
                'inpLaborCardExp': 'laborCardExp',
                'inpEidExp': 'eidExp',
                'inpNotesExisting': 'notes'
            };

            for (const [inputId, field] of Object.entries(fieldMap)) {
                const element = document.getElementById(inputId);
                if (element) {
                    element.value = emp[field] || "";
                }
            }
            
            // Load documents if they exist
            documents = emp.documents || [];
            documentsExisting = emp.documents || [];
            updateDocumentList();
            updateDocumentListExisting();
            
            document.getElementById('editId').value = emp.id;
            document.getElementById('modalTitle').innerText = `${t('editStaff')}: ${emp.name}`;
            toggleFieldsByType();
            openModal('staffModal');
        }

        function toggleFieldsByType() {
            const staffType = document.getElementById('inpStaffType').value;
            const newSections = document.getElementById('newStaffSections');
            const existingSections = document.getElementById('existingStaffSections');
            
            if (staffType === 'new') {
                newSections.style.display = 'block';
                existingSections.style.display = 'none';
            } else {
                newSections.style.display = 'none';
                existingSections.style.display = 'block';
            }
        }

        // ====================== DOCUMENT MANAGEMENT ======================
        function handleFileSelect(event) {
            const files = event.target.files;
            for (let file of files) {
                const document = {
                    id: Date.now() + Math.random(),
                    name: file.name,
                    date: new Date().toISOString().split('T')[0],
                    size: file.size,
                    type: file.type
                };
                documents.push(document);
            }
            updateDocumentList();
            event.target.value = ''; // Reset input
        }

        function handleFileSelectExisting(event) {
            const files = event.target.files;
            for (let file of files) {
                const document = {
                    id: Date.now() + Math.random(),
                    name: file.name,
                    date: new Date().toISOString().split('T')[0],
                    size: file.size,
                    type: file.type
                };
                documentsExisting.push(document);
            }
            updateDocumentListExisting();
            event.target.value = ''; // Reset input
        }

        function removeDocument(id) {
            documents = documents.filter(doc => doc.id !== id);
            updateDocumentList();
        }

        function removeDocumentExisting(id) {
            documentsExisting = documentsExisting.filter(doc => doc.id !== id);
            updateDocumentListExisting();
        }

        function updateDocumentList() {
            const listElement = document.getElementById('documentList');
            
            if (documents.length === 0) {
                listElement.innerHTML = `<p style="color: var(--cc-text-muted); font-size: 12px; margin-top: 5px;">${t('noDocumentsUploaded')}</p>`;
                return;
            }
            
            let html = '';
            documents.forEach(doc => {
                const fileSize = doc.size ? `(${(doc.size / 1024).toFixed(1)} KB)` : '';
                html += `
                    <div class="document-item">
                        <div class="document-name">
                            <i class="fas fa-file-alt"></i>
                            <span>${doc.name}</span>
                            <small>${fileSize}</small>
                        </div>
                        <div class="document-date">${formatDate(doc.date)}</div>
                        <div class="document-actions">
                            <button class="action-btn btn-edit" onclick="viewDocument('${doc.name}')" title="${t('view')}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn btn-del" onclick="removeDocument(${doc.id})" title="${t('remove')}">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            listElement.innerHTML = html;
        }

        function updateDocumentListExisting() {
            const listElement = document.getElementById('documentListExisting');
            
            if (documentsExisting.length === 0) {
                listElement.innerHTML = `<p style="color: var(--cc-text-muted); font-size: 12px; margin-top: 5px;">${t('noDocumentsUploaded')}</p>`;
                return;
            }
            
            let html = '';
            documentsExisting.forEach(doc => {
                const fileSize = doc.size ? `(${(doc.size / 1024).toFixed(1)} KB)` : '';
                html += `
                    <div class="document-item">
                        <div class="document-name">
                            <i class="fas fa-file-alt"></i>
                            <span>${doc.name}</span>
                            <small>${fileSize}</small>
                        </div>
                        <div class="document-date">${formatDate(doc.date)}</div>
                        <div class="document-actions">
                            <button class="action-btn btn-edit" onclick="viewDocument('${doc.name}')" title="${t('view')}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn btn-del" onclick="removeDocumentExisting(${doc.id})" title="${t('remove')}">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            listElement.innerHTML = html;
        }

        function viewDocument(fileName) {
            showToast(t('viewingDocument', { name: fileName }), 'success');
            // In a real application, this would open document
        }

        // ====================== SAVE FUNCTION ======================
        function saveStaff() {
            console.log('üíæ Saving staff data...');
            
            try {
                // Get form values
                const editId = document.getElementById('editId').value;
                const id = document.getElementById('inpId').value.trim();
                const name = document.getElementById('inpName').value.trim();
                const staffType = document.getElementById('inpStaffType').value;
                
                // Validation
                if (!id) {
                    showToast(t('employeeIdRequired'), 'error');
                    document.getElementById('inpId').focus();
                    return;
                }
                
                if (!name) {
                    showToast(t('employeeNameRequired'), 'error');
                    document.getElementById('inpName').focus();
                    return;
                }
                
                // Check for duplicate ID (only for new records)
                if (!editId) {
                    const duplicate = employees.find(e => e.id === id);
                    if (duplicate) {
                        showToast(t('employeeIdAlreadyExists', { id }), 'error');
                        document.getElementById('inpId').focus();
                        return;
                    }
                }
                
                // Create base employee object
                const formData = {
                    staffType: staffType,
                    id: id,
                    name: name,
                    nationality: document.getElementById('inpNationality').value,
                    designation: document.getElementById('inpDesignation').value.trim(),
                    branch: document.getElementById('inpBranch').value,
                    hireDate: document.getElementById('inpHireDate').value,
                    lastUpdated: new Date().toISOString()
                };
                
                // Add documents based on staff type
                formData.documents = staffType === 'new' ? documents : documentsExisting;
                
                // Add fields based on staff type
                if (staffType === 'new') {
                    // New Staff fields
                    formData.entryIssued = document.getElementById('inpEntryIssued').value;
                    formData.entryConfirmed = document.getElementById('inpEntryConfirmed').value;
                    formData.entryExp = document.getElementById('inpEntryExp').value;
                    formData.dateEntry = document.getElementById('inpDateEntry').value;
                    formData.visitVisaExp = document.getElementById('inpVisitVisaExp').value;
                    formData.entryResponsible = document.getElementById('inpEntryResponsible').value;
                    
                    formData.mohreOffer = document.getElementById('inpMohreOffer').value;
                    formData.offerSigned = document.getElementById('inpOfferSigned').value;
                    formData.laborContract = document.getElementById('inpLaborContract').value;
                    formData.laborSigned = document.getElementById('inpLaborSigned').value;
                    formData.statusSub = document.getElementById('inpStatusSub').value;
                    formData.statusApp = document.getElementById('inpStatusApp').value;
                    formData.workPermit = document.getElementById('inpWorkPermit').value;
                    formData.cancelExp = document.getElementById('inpCancelExp').value;
                    formData.immigrationResponsible = document.getElementById('inpImmigrationResponsible').value;
                    
                    formData.medSch = document.getElementById('inpMedSch').value;
                    formData.medComp = document.getElementById('inpMedComp').value;
                    formData.medResult = document.getElementById('inpMedResult').value;
                    formData.healthCard = document.getElementById('inpHealthCard').value;
                    formData.medInsurance = document.getElementById('inpMedInsurance').value;
                    formData.eidBio = document.getElementById('inpEidBio').value;
                    formData.eidCardPrinted = document.getElementById('inpEidCardPrinted').value;
                    formData.eidRec = document.getElementById('inpEidRec').value;
                    formData.medicalResponsible = document.getElementById('inpMedicalResponsible').value;
                    
                    formData.visaApp = document.getElementById('inpVisaApp').value;
                    formData.visaIssued = document.getElementById('inpVisaIssued').value;
                    formData.visaStamped = document.getElementById('inpVisaStamped').value;
                    formData.visaExp = document.getElementById('inpVisaExp').value;
                    formData.laborCard = document.getElementById('inpLaborCard').value;
                    formData.fedAuthReg = document.getElementById('inpFedAuthReg').value;
                    formData.visaResponsible = document.getElementById('inpVisaResponsible').value;
                    
                    formData.bankAccount = document.getElementById('inpBankAccount').value;
                    formData.accommodation = document.getElementById('inpAccommodation').value;
                    formData.uniform = document.getElementById('inpUniform').value;
                    formData.equipment = document.getElementById('inpEquipment').value;
                    formData.itSetup = document.getElementById('inpItSetup').value;
                    formData.adminSetup = document.getElementById('inpAdminSetup').value;
                    formData.orientation = document.getElementById('inpOrientation').value;
                    formData.branchStartDate = document.getElementById('inpBranchStart').value;
                    formData.onboardingResponsible = document.getElementById('inpOnboardingResponsible').value;
                    formData.notes = document.getElementById('inpNotes').value;
                } else {
                    // Existing Staff fields
                    formData.passportNo = document.getElementById('inpPassportNo').value;
                    formData.passportExp = document.getElementById('inpPassportExp').value;
                    formData.medExpMain = document.getElementById('inpMedExpMain').value;
                    formData.visaExpExisting = document.getElementById('inpVisaExpExisting').value;
                    formData.laborCardExp = document.getElementById('inpLaborCardExp').value;
                    formData.eidExp = document.getElementById('inpEidExp').value;
                    formData.notesExisting = document.getElementById('inpNotesExisting').value;
                }
                
                console.log('Form data:', formData);
                
                if (editId) {
                    // Update existing employee
                    const index = employees.findIndex(e => e.id === editId);
                    if (index !== -1) {
                        employees[index] = { ...employees[index], ...formData };
                        console.log(`‚úÖ Updated employee: ${id}`);
                    } else {
                        showToast(t('employeeNotFound'), 'error');
                        return;
                    }
                } else {
                    // Add new employee
                    employees.unshift(formData);
                    console.log(`‚úÖ Added new employee: ${id}`);
                }
                
                // Save and update UI
                saveData();
                closeModal('staffModal');
                showToast(editId ? t('employeeUpdatedSuccessfully') : t('employeeAddedSuccessfully'), 'success');
                
            } catch (error) {
                console.error('Error saving staff:', error);
                showToast(t('errorOccurred'), 'error');
            }
        }

        function deleteEmployee(id) {
            if (confirm(t('areYouSureDelete', { id }))) {
                const originalLength = employees.length;
                employees = employees.filter(e => e.id !== id);
                
                // Force save to localStorage immediately
                localStorage.setItem(STORAGE_KEY, JSON.stringify(employees));
                
                if (employees.length < originalLength) {
                    showToast(t('employeeDeletedSuccessfully'), 'success');
                    // Reload data to ensure it's saved
                    loadData();
                } else {
                    showToast(t('employeeNotFound'), 'error');
                }
            }
        }

        // ====================== NOTIFICATIONS ======================
        function updateNotifications() {
            const today = new Date();
            const notifications = [];
            let notificationCount = 0;

            employees.forEach(emp => {
                const status = getOverallStatus(emp);
                
                if (status.category === 'expired') {
                    notifications.push({
                        type: 'error',
                        message: `${emp.name} (${emp.id}) - ${t('documentsExpired')}`,
                        employeeId: emp.id
                    });
                    notificationCount++;
                } else if (status.category === 'warning') {
                    const pass = getExpiryStatus(emp.passportExp);
                    const visa = getExpiryStatus(emp.visaExp || emp.visaExpExisting);
                    const med = getExpiryStatus(emp.medExpMain);
                    
                    let expiringItem = 'Documents';
                    if (pass.warning) expiringItem = 'Passport';
                    else if (visa.warning) expiringItem = 'Visa';
                    else if (med.warning) expiringItem = 'Medical Insurance';
                    
                    notifications.push({
                        type: 'warning',
                        message: `${emp.name} (${emp.id}) - ${t('documentsExpiringIn', { item: expiringItem, days: pass.daysLeft || visa.daysLeft || med.daysLeft })}`,
                        employeeId: emp.id
                    });
                    notificationCount++;
                } else if (emp.staffType === 'new' && status.category === 'process') {
                    const nextStep = getNextStep(emp);
                    notifications.push({
                        type: 'info',
                        message: `${emp.name} (${emp.id}) - ${nextStep.step}`,
                        employeeId: emp.id
                    });
                    notificationCount++;
                }
                
                // Check for overdue entry permits
                if (emp.staffType === 'new' && emp.entryIssued && !emp.entryConfirmed) {
                    const issueDate = new Date(emp.entryIssued);
                    const daysSinceIssue = Math.floor((today - issueDate) / (1000 * 60 * 60 * 24));
                    
                    if (daysSinceIssue > 60) {
                        notifications.push({
                            type: 'warning',
                            message: `${emp.name} (${emp.id}) - ${t('entryPermitConfirmationOverdue', { days: daysSinceIssue })}`,
                            employeeId: emp.id
                        });
                        notificationCount++;
                    }
                }
            });

            // Update notification list
            const notificationsList = document.getElementById('notificationsList');
            if (notifications.length === 0) {
                notificationsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bell-slash"></i>
                        <h3>${t('noAlerts')}</h3>
                        <p>${t('allEmployeesUpToDate')}</p>
                    </div>
                `;
            } else {
                let html = '<div style="display: flex; flex-direction: column; gap: 10px;">';
                notifications.forEach(notif => {
                    const icon = notif.type === 'error' ? 'üî¥' : notif.type === 'warning' ? 'üü†' : 'üîµ';
                    html += `
                        <div style="padding: 12px; background: ${notif.type === 'error' ? '#fee' : notif.type === 'warning' ? '#ffd' : '#eef'}; 
                             border-radius: 6px; border-left: 4px solid ${notif.type === 'error' ? '#dc3545' : notif.type === 'warning' ? '#f59e0b' : '#3b82f6'};">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 18px;">${icon}</span>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; font-size: 13px;">${notif.message}</div>
                                    <small style="color: #666; font-size: 11px;">
                                        ${t('clickArrowToView')}
                                    </small>
                                </div>
                                <button class="action-btn btn-edit" onclick="editEmployee('${notif.employeeId}'); closeModal('notificationsModal')">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                notificationsList.innerHTML = html;
            }
        }

        function showNotifications() {
            updateNotifications();
            openModal('notificationsModal');
        }

        // ====================== REPORT PRINTING ======================
        function printReport(id) {
            const emp = employees.find(e => e.id === id);
            if (!emp) {
                showToast(t('employeeNotFound'), 'error');
                return;
            }

            // Set report data
            document.getElementById('printDate').innerText = new Date().toLocaleString();
            document.getElementById('prName').innerText = emp.name;
            document.getElementById('prId').innerText = emp.id;
            document.getElementById('prDesignation').innerText = emp.designation || '-';
            document.getElementById('prBranch').innerText = emp.branch;
            
            const status = getOverallStatus(emp);
            document.getElementById('prStatus').innerText = status.label;
            document.getElementById('prStage').innerText = emp.staffType === 'new' ? t('onboarding') : t('employed');

            // Set checkmarks
            const chk = (val) => val ? '‚úÖ ' + formatDate(val) : '‚ùå ' + t('pending');
            document.getElementById('prEntry').innerText = chk(emp.entryIssued);
            document.getElementById('prMedical').innerText = chk(emp.medResult);
            document.getElementById('prEID').innerText = chk(emp.eidRec);
            document.getElementById('prVisa').innerText = chk(emp.visaIssued);
            document.getElementById('prPassExp').innerText = emp.passportExp ? formatDate(emp.passportExp) : '-';
            document.getElementById('prVisaExp').innerText = emp.visaExp ? formatDate(emp.visaExp) : '-';

            // Generate onboarding timeline
            if (emp.staffType === 'new') {
                const timeline = document.getElementById('onboardingTimeline');
                let timelineHTML = '';
                
                const steps = [
                    { name: t('hireApproval'), date: emp.hireDate },
                    { name: t('entryPermitIssued'), date: emp.entryIssued },
                    { name: t('entryPermitConfirmed'), date: emp.entryConfirmed },
                    { name: t('dateOfEntry'), date: emp.dateEntry },
                    { name: t('laborContract'), date: emp.laborSigned },
                    { name: t('medicalResult'), date: emp.medResult },
                    { name: t('medicalInsurance'), date: emp.medInsurance },
                    { name: t('eidReceived'), date: emp.eidRec },
                    { name: t('visaIssued'), date: emp.visaIssued },
                    { name: t('visaStamped'), date: emp.visaStamped },
                    { name: t('bankAccount'), date: emp.bankAccount },
                    { name: t('branchStartDate'), date: emp.branchStartDate }
                ];
                
                steps.forEach((step, index) => {
                    if (step.date) {
                        const prevDate = index > 0 && steps[index-1].date ? new Date(steps[index-1].date) : null;
                        const currDate = new Date(step.date);
                        const daysTaken = prevDate ? Math.ceil((currDate - prevDate) / (1000 * 60 * 60 * 24)) : '-';
                        
                        timelineHTML += `
                            <tr>
                                <td>${step.name}</td>
                                <td>-</td>
                                <td>${formatDate(step.date)}</td>
                                <td>${daysTaken}</td>
                                <td>${getStepResponsible(step.name)}</td>
                            </tr>
                        `;
                    }
                });
                
                timeline.innerHTML = timelineHTML;
            }

            // Actions list
            let actions = '';
            if (emp.hireDate) actions += `<li>${t('hireApprovedOn')} ${formatDate(emp.hireDate)}</li>`;
            if (emp.entryIssued) actions += `<li>${t('entryPermitIssued')}: ${formatDate(emp.entryIssued)}</li>`;
            if (emp.entryConfirmed) actions += `<li>${t('entryPermitConfirmed')}: ${formatDate(emp.entryConfirmed)}</li>`;
            if (emp.dateEntry) actions += `<li>${t('dateOfEntry')}: ${formatDate(emp.dateEntry)}</li>`;
            if (emp.laborContract) actions += `<li>${t('laborContractPrepared')}: ${formatDate(emp.laborContract)}</li>`;
            if (emp.laborSigned) actions += `<li>${t('laborContractSigned')}: ${formatDate(emp.laborSigned)}</li>`;
            if (emp.medResult) actions += `<li>${t('medicalFit')}: ${formatDate(emp.medResult)}</li>`;
            if (emp.medInsurance) actions += `<li>${t('medicalInsurance')}: ${formatDate(emp.medInsurance)}</li>`;
            if (emp.eidRec) actions += `<li>${t('eidReceived')}: ${formatDate(emp.eidRec)}</li>`;
            if (emp.visaIssued) actions += `<li>${t('residencyVisaIssued')}: ${formatDate(emp.visaIssued)}</li>`;
            if (emp.visaStamped) actions += `<li>${t('visaStamped')}: ${formatDate(emp.visaStamped)}</li>`;
            if (emp.bankAccount) actions += `<li>${t('bankAccountOpened')}: ${formatDate(emp.bankAccount)}</li>`;
            if (emp.branchStartDate) actions += `<li>${t('handedOverToBranch')} ${formatDate(emp.branchStartDate)}</li>`;
            
            if (emp.notes) actions += `<li>${t('notes')}: ${emp.notes}</li>`;
            
            document.getElementById('prActions').innerHTML = actions || '<li>No actions recorded yet.</li>';

            // Show stamp if ready
            const stamp = document.getElementById('prStamp');
            stamp.style.display = status.label.includes(t('ready')) ? 'flex' : 'none';

            // Print after short delay
            setTimeout(() => {
                window.print();
            }, 300);
        }

        // ====================== UTILITY FUNCTIONS ======================
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('open');
            document.body.style.overflow = 'auto';
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'exclamation-triangle'}"></i>
                <span>${message}</span>
            `;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.className = toast.className.replace('show', '');
            }, 3000);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('cc_hr_theme', newTheme);
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-GB', {
                day: '2-digit',
                month: 'short',
                year: 'numeric'
            });
        }

        function exportToCSV() {
            if (employees.length === 0) {
                showToast(t('noDataToExport'), 'warning');
                return;
            }
            
            const headers = [
                'ID', 'Name', 'Type', 'Branch', 'Designation', 'Nationality',
                'Passport Expiry', 'Visa Expiry', 'Medical Expiry', 'Status',
                'Last Updated'
            ];
            
            let csv = headers.join(',') + '\n';
            
            employees.forEach(emp => {
                const status = getOverallStatus(emp);
                
                const row = [
                    `"${emp.id}"`,
                    `"${emp.name}"`,
                    emp.staffType === 'new' ? 'New' : 'Existing',
                    `"${emp.branch || ''}"`,
                    `"${emp.designation || ''}"`,
                    `"${emp.nationality || ''}"`,
                    emp.passportExp || '',
                    emp.visaExp || emp.visaExpExisting || '',
                    emp.medExpMain || '',
                    status.label,
                    emp.lastUpdated ? formatDate(emp.lastUpdated) : ''
                ];
                
                csv += row.join(',') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `cc_hr_export_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showToast(t('dataExportedSuccessfully'), 'success');
        }

        // ====================== EVENT LISTENERS ======================
        // Close modal on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.open').forEach(modal => {
                    modal.classList.remove('open');
                });
                document.body.style.overflow = 'auto';
            }
        });

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.classList.remove('open');
                document.body.style.overflow = 'auto';
            }
        });

        // Initial data load
        loadData();

        console.log('üéâ Crispy Chicken HR System Ready!');
    </script>
</body>
</html>
